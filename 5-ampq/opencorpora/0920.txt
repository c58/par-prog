Потихоньку изучаю CLOS MOP. Отличная штука.
Хочу использовать для упрощения создания биндинга cl-gtk2.
Можно, например, с помощью MOP'а один раз написать универсальный конструктор (специализация make-instance), доступ к слотам (специализация slot-value-using-class, slot-boundp-using-class, slot-makunbound-using-class), и можно писать такие конструкции:
Записав такое определение, сразу получаем класс, привязанный к соотвествующему gobject-классу:
можно создавать объекты этого класса, и при создании gtk-label будет создаваться GtkLabel с нужными параметрами:
сразу имеем доступ к слотам:
Конечно, можно обойтись и без MOP (я использую генератор конструктора и функций доступа к слотам на основе макросов), но с MOP получается уж больно красиво и элегантно.
Еще надо разобраться с тем, как работают метаобъекты для обобщенных функций, и как-то суметь реализовать наследование классов от gobject-классов через MOP.
Надо еще убедиться, что MOP поддерживается хотя бы несколькими свободными реализациями лиспа в достаточном объеме.
