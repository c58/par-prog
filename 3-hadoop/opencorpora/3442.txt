Глава 7
Вёрстка
Автору сравнительно легко потратить немного лишнего времени на какие-то детали, потому что он потратил гораздо больше времени на написание книги.
Дональд Э.Кнут
Волшебных текстовых процессоров не существует. Телепатией программы пока не обладают. Они, естественно, делают то, что им сказано, но вкус и чувство прекрасного у них полностью отсутствует. В конце занимательного приключения по созданию текстов частенько приходится брать управление в свои руки, дабы навести лоск на почти готовое произведение.
Вёрстка — составление страниц (полос) газеты, журнала, книги определённого размера из набранных строк, заголовков, иллюстраций и тому подобного в соответствие с разметкой или макетом. В этой главе разберёмся с тем, как задавать размеры, что такое макет полосы набора и как «удерживать» текст в рамках дозволенного.
Здесь присутствует далеко не вся информация, необходимая при вёрстке текста. Несмотря на то, что LATEX позволяет верстать книги любителям без помощи профессионалов, но лучше при любой возможности спрашивать у этих профессионалов совета. Здесь очень важно понимание что, где и зачем надо исправлять, потому что способ решения уже известной проблемы, как правило, очевиден.
7.1. Скелет страницы
На рис. 7.1 приведён результат выполнения команды \layout из одноимённого пакета. Основное место на странице занимает текст — это тело текста.
Справа и слева от текста расположены поля. Поля обычно остаются пустыми, но иногда они используются для заметок (маргиналий или фонариков). В верхней и нижней части страницы расположены соответственно верхний и нижний колонтитулы. Колонтитул представляет собой справочную строку, помогающую ориентироваться в структуре текста.
Совокупность размеров и расположений указанных полей, а также вид и содержание колонтитулов называется макетом полосы набора. На рис. 7.1 пунктирной линией изображены поля драйвера (1 и 2). Относительно этих базовых полей выстраиваются все остальные поля. По договорённости отступы до полей драйвера равны одному дюйму. Переопределив \hoffset и \voffset (по умолчанию они равны нулю), можно легко сдвинуть полосу набора целиком по горизонтали и вертикали соответственно.
Далее перечислены параметры, которые управляют макетом полосы набора.
• Тело текста характеризуется высотой \texthight 7 и шириной \textwidth 8. При многоколоночной вёрстке ширина колонки равна \columnwidth. Переменная \linewidth принимает значение, равное длине строки текущего текста. • \oddsidemargin 3 добавляется слева в случае односторонней печати. При двухсторонней печати полосы набора для чётных и нечётных страниц различаются. В этом случае для нечётных страниц слева опять же добавляется \oddsidemargin, а для чётных — \evensidemargin. • Верхний колонтитул располагается на расстоянии \topmargin 4 от поля драйвера, имеет высоту \headheight 5, а тело текста отступает от колонтитула на расстояние \headsep 6. • \footskip позиционирует базовую линию нижнего колонтитула относительно последней строки текста. • Поля для заметок имеют ширину \marginparwidth 10 и отступают от тела текста на расстояние \marginparsep 9. Ещё одна опция управляет минимальным расстоянием между заметками: \marginparpush.
7.1.1. Выбор размера бумаги
Размер листа бумаги описывается переменными \paperwidth и \paperheight. Стандартные базовые классы LATEX (article, book, report и letter) по умолчанию предполагают, что для печати используется бумага формата letter. Очевидно это умолчание не годится для России, где стандартом является формат A4 (210 × 297 мм). Обычно установить правильный формат можно с помощью передачи параметра a4paper при выборе класса документа:
\documentclass [a4paper,12 pt,oneside]{scrbook}
Для создания небольших брошюрок со страницей размера A5 (половина размера A4) используется опция a5paper.
7.1.2. Ориентация
Для портретной и альбомной ориентации вообще-то требуются разные макеты полосы набора. Альбомная ориентация может использоваться по умолчанию в некоторых специализированных классах (например, slides).
Если повернуть требуется только текст без изменения полей колонтитулов, то проще всего воспользоваться окружением landscape из пакета lscape. Всё, что находится внутри этого окружения, поворачивается на 90 градусов против часовой стрелки. Во время использования pdflatex для изменения ориентации не только текста, но и страницы (дабы не наклонять при чтении текста голову на бок), при загрузке пакета следует передать ему опцию pdftex или воспользоваться пакетом-надстройкой pdflscape.
Лучше не менять параметры макета во время набора, но если очень хочется, то можно воспользоваться стандартным пакетом portland, который позволяет на лету менять портретную ориентацию на альбомную и обратно, переопределяя соответствующие управляющие макетом переменные. Команды \portrait и \landscape работают как переключатели между этими режимами. В пакете определены и одноимённые с переключателями окружения. Это довольно низкоуровневый пакет, и пользоваться им надо аккуратно.
Если по какой-то причине потребуется развернуть текст на 180 градусов, можно воспользоваться пакетом rotpages. В пакете определены два переключателя режима \rotboxpages и \endrotboxpages, которые указывают границы повёрнутого вверх ногами текста. Пакет умеет разворачивать не только страницы, но и колонки. Подробности в документации rotpages-doc.pdf
7.2. Меняем макет
Причина, по которой неискушённый TEXник начинает менять макет полосы набора, обычно заключается в том, что он использует стандартные классы LATEX: один из четвёрки article, book, report или letter. Это очень древние классы, и на них много чего «завязано», поэтому они прибывают в абсолютно замороженном состоянии. Лучше для начала найти себе другой базовый класс «по душе». Например, scrartcl, scrbook, scrreprt и scrlettr — классы из коллекции KOMA-Script, которые, дублируя функциональность стандартной четвёрки, ориентируются на европейских пользователей и размер листа A4. А.И. Роженко в рамках коллекции ncclatex (NCC) предоставляет класс ncc, ориентированный на русских TEXников.
7.2.1. Двигаем размеры
Выбор, естественно, не ограничивается упомянутыми ранее классами — он огромен. Поэтому прежде чем что-то изменять, следует внимательно изучить уже имеющиеся решения. И даже если вы знаете что делаете, лучше не переопределять вручную переменные, управляющие размерами макета полосы набора. Правильным решением будет воспользоваться одним из уже имеющих специализированных пакетов, например: geometry, vmargin или typearea.
Ещё раз: «Макет лучше не менять!»
